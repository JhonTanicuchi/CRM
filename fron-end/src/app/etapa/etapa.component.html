<div class="grid grid-cols-5 divide-x divide-black-100">
  <div

    class="p-2 relative bg-white"
    style="height: calc(100vh - 64px - 40px)"
  >

  <div class="shadow stats w-full mb-2 rounded-lg bg-gray-100">
    <div class="stat">
      <div class="stat-figure text-primary">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2" />
        </svg>
      </div>
      <div class="stat-title">Etapas Totales</div>
      <div class="stat-value">{{ listadoEtapas.length }}</div>
      <div class="stat-desc">Etapas Registradas</div>
    </div>
  </div>
    <div>
      <div class="shadow stats w-full mb-2 rounded-lg bg-gray-100">
        <div class="stat">
          <div class="stat-figure text-secondary">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
            </svg>
          </div>
          <div class="stat-value">{{ EtapasActivos() }}</div>
          <div class="stat-title">Etapas en Proceso</div>
          <div class="stat-desc text-secondary">
            {{ listadoEtapas.length - EtapasActivos() }} Etapas Completadas
          </div>
        </div>
      </div>
  </div>
    <button

[ngClass]="{ hidden: flag, flex: !flag }"

      (click)="cambiarFlag()"
      (click)="limpiarForm()"
      (click)="iconDeletFalse()"
      class="shadow btn bg-primary border-primary text-white absolute right-0 bottom-0 m-2 btn-circle hover:bg-primary-focus hover:border-primary-focus"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-6 w-6"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M12 6v6m0 0v6m0-6h6m-6 0H6"
        />
      </svg>
    </button>
  </div>



  <div
    [ngClass]="{ hidden: flag, block: !flag }"
    class="col-start-2 col-end-6 overflow-auto scrollbar-hide p-2 relative"
    style="height: calc(100vh - 64px - 40px)"
  >
    <div class="-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
      <div class="py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8">
        <div class="shadow overflow-hidden border-b border-gray-200 rounded-lg">
          <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-100">
              <tr>
                <th
                  scope="col"
                  class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                >
                  Id
                </th>
                <th
                  scope="col"
                  class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                >
                  Nombre
                </th>
                <th
                  scope="col"
                  class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                >
                  Descripcion
                </th>
                <th
                  scope="col"
                  class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                >
                  Estado
                </th>
                <th scope="col" class="relative px-6 py-3">
                  <span class="sr-only">Editar</span>
                </th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
              <tr
                *ngFor="let etapa of listadoEtapas"
                [class.active]="etapa == etapaActual"
              >

                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {{ etapa.etapasId }}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {{ etapa.nombre }}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {{ etapa.descripcion}}
                </td>
                <td
                  *ngIf="etapa.estado == true"
                  class="px-6 py-4 whitespace-nowrap"
                >
                  <span
                    class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"
                  >
                    En proceso
                  </span>
                </td>
                <td
                  *ngIf="etapa.estado == false"
                  class="px-6 py-4 whitespace-nowrap"
                >
                  <span
                    class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"
                  >
                    Completado
                  </span>
                </td>
                <td
                  *ngIf="etapa.estado == null"
                  class="px-6 py-4 whitespace-nowrap"
                >
                  <span
                    class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"
                  >
                    Vacio
                  </span>
                </td>
                <td
                  class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"
                >
                  <a
                    (click)="seleccionarEtapa(etapa)"
                    (click)="cambiarFlag()"
                    (click)="iconDeletTrue()"
                    class="text-primary hover:text-primary-focus cursor-pointer"
                    >Editar</a
                  >
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div
      class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"
    >
      <p *ngIf="listadoEtapas.length == 0" class="text-gray-400">
        No hay usuarios
      </p>
    </div>
  </div>

  <div
    [ngClass]="{ block: flag, hidden: !flag }"
    class="col-start-2 col-end-6 p-2 relative"
  >

<div
      *ngIf="iconDelete == false"
      class="bg-gray-100 rounded-lg flex items-center justify-center text-center"
    >
      <h2 class="p-4 text-xl uppercase font-bold">Nueva Etapa</h2>
    </div>


    <div
      *ngIf="iconDelete == true"
      class="bg-gray-100 rounded-lg flex items-center justify-center text-center"
    >
      <h2 class="p-4 text-xl uppercase font-bold">Etapa NÂ°{{etapaActual.etapasId}}</h2>
    </div>




    <div class="p-5 pt-10 grid grid-cols-3 gap-4 gap-x-5 gap-y-5">
      <div>
        <label for="name" class="block text-sm font-medium text-gray-700"
          >Nombre</label
        >
        <div class="mt-1 relative rounded-md shadow-sm">
          <input
            type="text"
            name="name"
            id="name"
            class="focus:ring-secondary focus:border-secondary block w-full sm:text-sm border-primary rounded-md"
            [(ngModel)]="etapaActual.nombre"
            placeholder="nombre"
          />
        </div>
      </div>

      <div>
        <label for="descripcion" class="block text-sm font-medium text-gray-700"
          >Descripcion</label
        >
        <div class="mt-1 relative rounded-md shadow-sm">
          <input
            type="text"
            name="descripcion"
            id="descripcion"
            class="focus:ring-secondary focus:border-secondary block w-full sm:text-sm border-primary rounded-md"
            [(ngModel)]="etapaActual.descripcion"
            placeholder="descripcion"
          />
        </div>
      </div>

      <div>
        <label for="estado" class="block text-sm font-medium text-gray-700"
          >Estado</label
        >
        <div class="mt-1 relative shadow-sm">
          <select
            [(ngModel)]="etapaActual.estado"
            id="estado"
            class="w-full focus:ring-secondary focus:border-secondary block sm:text-sm border-primary rounded-md"
          >
            <option disabled selected>Estado</option>
            <option value="true">En proceso</option>
            <option value="false">Completado</option>

          </select>
        </div>
      </div>
    </div>



    <div
      class="card-actions mb-5 mx-3 absolute bottom-0 flex justify-between"
      style="width: calc(100% - 1rem - 0.75rem - 0.75rem)"
    >
      <button
        (click)="cambiarFlag()"
        class="btn bg-white text-neutral border-white btn-circle hover:bg-neutral hover:border-neutral hover:text-white"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"
          />
        </svg>
      </button>

      <button
        (click)="cambiarFlag()"
        (click)="save(etapaActual)"
        class="btn bg-primary border-primary text-white hover:bg-primary-focus hover:border-primary-focus"
      >
        <span class="mr-2">Guardar</span>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"
          />
        </svg>
      </button>

      <button
        *ngIf="iconDelete == true"
        (click)="cambiarFlag()"
        (click)="deleteById(etapaActual.etapasId)"
        class="btn bg-white border-white text-error-content btn-circle hover:bg-error-content hover:border-error-content hover:text-white"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
          />
        </svg>
      </button>
    </div>
  </div>
</div>
